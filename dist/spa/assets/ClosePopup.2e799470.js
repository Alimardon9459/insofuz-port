import{c as k,a as w,b as fe}from"./use-router-link.2c7f4719.js";import{c as l,h as u,g as N,W as U,A as G,r as P,w as O,G as me,H as R}from"./index.c5bdb514.js";import{u as ve,b as he,d as ge}from"./QBtn.c47aa8c6.js";import{u as ye,a as pe}from"./use-dark.798459ce.js";import{u as qe,a as xe}from"./use-prevent-scroll.bda7cd2d.js";import{u as be,a as ke,b as we,c as _e}from"./use-timeout.e4900cd8.js";import{u as Be,b as Ce,c as Ee,d as Se,g as Te,e as De}from"./QTooltip.3d803e88.js";import{b as Pe}from"./focus-manager.32f8d49a.js";var We=k({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:o}){const n=l(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>u(e.tag,{class:n.value},w(o.default))}}),Ne=k({name:"QCardActions",props:{...ve,vertical:Boolean},setup(e,{slots:o}){const n=he(e),i=l(()=>`q-card__actions ${n.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>u("div",{class:i.value},w(o.default))}}),Ue=k({name:"QCard",props:{...ye,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:o}){const{proxy:{$q:n}}=N(),i=pe(e,n),s=l(()=>"q-card"+(i.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>u(e.tag,{class:s.value},w(o.default))}});const f=[];let h;function ze(e){h=e.keyCode===27}function Le(){h===!0&&(h=!1)}function Fe(e){h===!0&&(h=!1,G(e,27)===!0&&f[f.length-1](e))}function J(e){window[e]("keydown",ze),window[e]("blur",Le),window[e]("keyup",Fe),h=!1}function He(e){U.is.desktop===!0&&(f.push(e),f.length===1&&J("addEventListener"))}function I(e){const o=f.indexOf(e);o>-1&&(f.splice(o,1),f.length===0&&J("removeEventListener"))}const m=[];function X(e){m[m.length-1](e)}function Ke(e){U.is.desktop===!0&&(m.push(e),m.length===1&&document.body.addEventListener("focusin",X))}function j(e){const o=m.indexOf(e);o>-1&&(m.splice(o,1),m.length===0&&document.body.removeEventListener("focusin",X))}let b=0;const Me={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},V={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]};var Ge=k({name:"QDialog",inheritAttrs:!1,props:{...be,...Be,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,position:{type:String,default:"standard",validator:e=>e==="standard"||["top","bottom","left","right"].includes(e)}},emits:[...ke,"shake","click","escapeKey"],setup(e,{slots:o,emit:n,attrs:i}){const s=N(),r=P(null),v=P(!1),g=P(!1);let c=null,d=null,p,_;const z=l(()=>e.persistent!==!0&&e.noRouteDismiss!==!0&&e.seamless!==!0),{preventBodyScroll:L}=xe(),{registerTimeout:F}=we(),{registerTick:Y,removeTick:H}=Ce(),{transitionProps:Z,transitionStyle:K}=Ee(e,()=>V[e.position][0],()=>V[e.position][1]),{showPortal:M,hidePortal:$,portalIsAccessible:ee,renderPortal:te}=Se(s,r,de,"dialog"),{hide:q}=_e({showing:v,hideOnRouteChange:z,handleShow:le,handleHide:ue,processOnMount:!0}),{addToHistory:oe,removeFromHistory:ne}=qe(v,q,z),ae=l(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${e.maximized===!0?"maximized":"minimized"} q-dialog__inner--${e.position} ${Me[e.position]}`+(g.value===!0?" q-dialog__inner--animating":"")+(e.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(e.fullHeight===!0?" q-dialog__inner--fullheight":"")+(e.square===!0?" q-dialog__inner--square":"")),x=l(()=>v.value===!0&&e.seamless!==!0),ie=l(()=>e.autoClose===!0?{onClick:re}:{}),se=l(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${x.value===!0?"modal":"seamless"}`,i.class]);O(()=>e.maximized,t=>{v.value===!0&&E(t)}),O(x,t=>{L(t),t===!0?(Ke(S),He(C)):(j(S),I(C))});function le(t){oe(),d=e.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,E(e.maximized),M(),g.value=!0,e.noFocus!==!0?(document.activeElement!==null&&document.activeElement.blur(),Y(y)):H(),F(()=>{if(s.proxy.$q.platform.is.ios===!0){if(e.seamless!==!0&&document.activeElement){const{top:a,bottom:T}=document.activeElement.getBoundingClientRect(),{innerHeight:Q}=window,D=window.visualViewport!==void 0?window.visualViewport.height:Q;a>0&&T>D/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-D,T>=Q?1/0:Math.ceil(document.scrollingElement.scrollTop+T-D/2))),document.activeElement.scrollIntoView()}_=!0,r.value.click(),_=!1}M(!0),g.value=!1,n("show",t)},e.transitionDuration)}function ue(t){H(),ne(),A(!0),g.value=!0,$(),d!==null&&(((t&&t.type.indexOf("key")===0?d.closest('[tabindex]:not([tabindex^="-"])'):void 0)||d).focus(),d=null),F(()=>{$(!0),g.value=!1,n("hide",t)},e.transitionDuration)}function y(t){Pe(()=>{let a=r.value;a===null||a.contains(document.activeElement)===!0||(a=(t!==""?a.querySelector(t):null)||a.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||a.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||a.querySelector("[autofocus], [data-autofocus]")||a,a.focus({preventScroll:!0}))})}function B(t){t&&typeof t.focus=="function"?t.focus({preventScroll:!0}):y(),n("shake");const a=r.value;a!==null&&(a.classList.remove("q-animate--scale"),a.classList.add("q-animate--scale"),c!==null&&clearTimeout(c),c=setTimeout(()=>{c=null,r.value!==null&&(a.classList.remove("q-animate--scale"),y())},170))}function C(){e.seamless!==!0&&(e.persistent===!0||e.noEscDismiss===!0?e.maximized!==!0&&e.noShake!==!0&&B():(n("escapeKey"),q()))}function A(t){c!==null&&(clearTimeout(c),c=null),(t===!0||v.value===!0)&&(E(!1),e.seamless!==!0&&(L(!1),j(S),I(C))),t!==!0&&(d=null)}function E(t){t===!0?p!==!0&&(b<1&&document.body.classList.add("q-body--dialog"),b++,p=!0):p===!0&&(b<2&&document.body.classList.remove("q-body--dialog"),b--,p=!1)}function re(t){_!==!0&&(q(t),n("click",t))}function ce(t){e.persistent!==!0&&e.noBackdropDismiss!==!0?q(t):e.noShake!==!0&&B()}function S(t){e.allowFocusOutside!==!0&&ee.value===!0&&ge(r.value,t.target)!==!0&&y('[tabindex]:not([tabindex="-1"])')}Object.assign(s.proxy,{focus:y,shake:B,__updateRefocusTarget(t){d=t||null}}),me(A);function de(){return u("div",{role:"dialog","aria-modal":x.value===!0?"true":"false",...i,class:se.value},[u(R,{name:"q-transition--fade",appear:!0},()=>x.value===!0?u("div",{class:"q-dialog__backdrop fixed-full",style:K.value,"aria-hidden":"true",tabindex:-1,onClick:ce}):null),u(R,Z.value,()=>v.value===!0?u("div",{ref:r,class:ae.value,style:K.value,tabindex:-1,...ie.value},w(o.default)):null)])}return te}});function W(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const o=parseInt(e,10);return isNaN(o)?0:o}var Je=fe({name:"close-popup",beforeMount(e,{value:o}){const n={depth:W(o),handler(i){n.depth!==0&&setTimeout(()=>{const s=Te(e);s!==void 0&&De(s,i,n.depth)})},handlerKey(i){G(i,13)===!0&&n.handler(i)}};e.__qclosepopup=n,e.addEventListener("click",n.handler),e.addEventListener("keyup",n.handlerKey)},updated(e,{value:o,oldValue:n}){o!==n&&(e.__qclosepopup.depth=W(o))},beforeUnmount(e){const o=e.__qclosepopup;e.removeEventListener("click",o.handler),e.removeEventListener("keyup",o.handlerKey),delete e.__qclosepopup}});export{Je as C,Ge as Q,Ue as a,We as b,Ne as c,Ke as d,I as e,He as f,j as r};
