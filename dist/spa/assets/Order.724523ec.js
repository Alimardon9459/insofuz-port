import{Q as T,a as F,b as q,c as L,C as U}from"./ClosePopup.2e799470.js";import{a as P,Q as h}from"./QBtn.c47aa8c6.js";import{Q as A,a as Q}from"./QTooltip.3d803e88.js";import{_ as x,u as C,k as u,l as p,F as N,p as M,q as n,x as l,t as V,v as y,z as B,d as s,m as c,a7 as w,a8 as z,ac as j,r as v,b as f,n as I,o as D,s as J}from"./index.c5bdb514.js";import{Q as b}from"./QInput.77e0d0f3.js";import"./use-router-link.2c7f4719.js";import"./use-dark.798459ce.js";import"./use-prevent-scroll.bda7cd2d.js";import"./selection.363d3796.js";import"./use-timeout.e4900cd8.js";import"./focus-manager.32f8d49a.js";import"./use-form.003d2a08.js";const K=o=>(w("data-v-d760f3ae"),o=o(),z(),o),E={class:"list"},G=K(()=>l("div",{class:"title"},"Buyurtmalar",-1)),H={class:"list__img row justify-center items-center"},W=["src"],X={class:"list__label"},Y={class:"list__price"},Z={key:0,class:"list__price_discount text-red"},ee={class:"list__price_no-discount"},te={class:"list__size"},se={class:"list__quantity row justify-between items-center content-center wrap"},oe={class:"item-count"},ae={class:"button"},le={__name:"purchasedProductsList",setup(o){const e=C();return(m,g)=>(u(),p("div",E,[G,(u(!0),p(N,null,M(n(e).purchasedProducts,(t,d)=>(u(),p("div",{class:"list__item",key:d},[l("div",H,[t.images.length?(u(),p("img",{key:0,src:t.images[0].image_link,alt:"",width:"50",height:"50"},null,8,W)):(u(),V(P,{key:1,name:"image",size:"xl"}))]),l("div",X,y(t.name),1),l("div",Y,[t.old_price?(u(),p("div",Z,[l("del",null,y(t.old_price)+" So'm ",1)])):B("",!0),l("div",ee,y(t.price)+" So'm",1)]),l("div",te,y(t.size),1),l("div",se,[l("div",oe,y(t.quantity)+" ta",1),s(A,{rounded:"",class:"button-group"},{default:c(()=>[s(h,{rounded:"",size:"sm",label:"+",onClick:_=>n(e).incrementAmount(t)},null,8,["onClick"]),t.quantity==1?(u(),V(h,{key:0,label:"-",rounded:"",size:"sm",disable:""})):(u(),V(h,{key:1,rounded:"",size:"sm",label:"-",onClick:_=>n(e).decrementAmount(t)},null,8,["onClick"]))]),_:2},1024)]),l("div",ae,[s(P,{name:"cancel",size:"sm",color:"red",onClick:_=>n(e).deleteProduct(t,d)},null,8,["onClick"])])]))),128))]))}};var re=x(le,[["__scopeId","data-v-d760f3ae"]]);const ie=o=>(w("data-v-67a56569"),o=o(),z(),o),ne={class:"user-info q-my-xl q-pa-md"},de=ie(()=>l("div",{class:"title text-grey text-weight-bold"},"Ma'lumotlaringiz",-1)),ue={class:"q-my-md"},ce={__name:"inputsForRegister",setup(o){const e=C(),m=j();let g=v(""),t=v(""),d=v(""),_=v(""),$=e.purchasedProducts,O=Date.now()+Math.floor(Math.random()*1e4),k=v(!1);e.userId=localStorage.getItem("userId");let R=async()=>{if(!e.userId){e.getLocation(),localStorage.setItem("userId",O),e.userId=localStorage.getItem("userId"),console.log(e.userId,"storeId");try{await fetch("http://insofuzlast.pythonanywhere.com/user/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.userId,userName:g.value,phoneNumber:t.value,address:d.value,location:e.userPosition,comment:_.value,total:e.amount})}),console.log(e.userPosition),k.value=!1}catch(i){console.log(i.message)}}};const S=async()=>{if(e.userId){try{for(let i of $){let a=i.price*i.quantity;await fetch("http://insofuzlast.pythonanywhere.com/orders/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({product_name:i.name,quantity:i.quantity,size:i.size,gender:i.gender,price:i.price,total_price:a,orderForUser:e.userId})})}}catch(i){console.log(i.massage),S()}m.push({name:"user",params:{id:e.userId}})}else k.value=!0,console.log(e.userId),console.log("true")};return console.log(e.purchasedProducts),(i,a)=>(u(),p("div",ne,[de,s(b,{modelValue:n(g),"onUpdate:modelValue":a[0]||(a[0]=r=>f(g)?g.value=r:g=r),label:"Ismingiz"},null,8,["modelValue"]),s(b,{modelValue:n(t),"onUpdate:modelValue":a[1]||(a[1]=r=>f(t)?t.value=r:t=r),label:"Raqamingiz"},null,8,["modelValue"]),s(b,{modelValue:n(d),"onUpdate:modelValue":a[2]||(a[2]=r=>f(d)?d.value=r:d=r),label:"Manzilingiz"},null,8,["modelValue"]),s(b,{type:"textarea",modelValue:n(_),"onUpdate:modelValue":a[3]||(a[3]=r=>f(_)?_.value=r:_=r),label:"Kamentariy berish"},null,8,["modelValue"]),l("div",ue,[s(h,{onClick:a[4]||(a[4]=r=>n(R)()),color:n(k)==!0?"red":"primary",icon:"location_on",class:"q-mr-md"},{default:c(()=>[I(" locatsiya "),s(Q,{class:"bg-accent"},{default:c(()=>[I("Iltimos locatsiyani olish tugmasini bosing")]),_:1})]),_:1},8,["color"]),s(h,{onClick:a[5]||(a[5]=r=>S())},{default:c(()=>[s(Q,{class:"bg-accent"},{default:c(()=>[I("Iltimos locatsiyani olish tugmasini bosing")]),_:1}),I(" Buyurtma Berish ")]),_:1})])]))}};var me=x(ce,[["__scopeId","data-v-67a56569"]]);const _e=o=>(w("data-v-6f452db3"),o=o(),z(),o),pe=_e(()=>l("div",{class:"text-h6"},"Alert",-1)),ge={key:0,class:"wrapper"},ve={__name:"Order",setup(o){const e=C();let m=v(!1);return D(()=>{e.purchasedProducts.length||(m.value=!0,setTimeout(()=>{location.replace("/")},6e3))}),(g,t)=>(u(),p(N,null,[l("div",null,[s(T,{modelValue:n(m),"onUpdate:modelValue":t[0]||(t[0]=d=>f(m)?m.value=d:m=d)},{default:c(()=>[s(F,null,{default:c(()=>[s(q,null,{default:c(()=>[pe]),_:1}),s(q,{class:"q-pt-none"},{default:c(()=>[I(" Lorem ipsum dolor sit amet consectetur adipisicing elit. Rerum repellendus sit voluptate voluptas eveniet porro. Rerum blanditiis perferendis totam, ea at omnis vel numquam exercitationem aut, natus minima, porro labore. ")]),_:1}),s(L,{align:"right"},{default:c(()=>[J(s(h,{flat:"",label:"OK",color:"primary"},null,512),[[U]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),n(e).purchasedProducts.length?(u(),p("div",ge,[s(me),s(re,{class:"q-my-md"})])):B("",!0)],64))}};var qe=x(ve,[["__scopeId","data-v-6f452db3"]]);export{qe as default};
